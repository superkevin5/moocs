<div ng-init="isOpen=false">
  <h4>
    <a href="" ng-click="isOpen=!isOpen" ng-show="!isOpenAll">
      <i class="glyphicon " ng-class="{'glyphicon-menu-down': isOpen,'glyphicon-menu-right':!isOpen}"></i>&nbsp;
    </a>
  <span
    href="" ng-show="isOpenAll">
    &nbsp;    &nbsp;
  </span>
    {{node.label}}</h4>
</div>

<div ng-if="!node.items&&isOpen||isOpenAll" ng-switch="node.label" class="container">

  <form role="form" name="jsonform">
    <div class="row">

      <div ng-switch-when="type" class="col-xs-5 editarea">
        <div class="form-group has-feedback"
             ng-class="{'has-success':(jsonform.type.$dirty && !edit)|| (jsonform.type.$pristine&&!edit)}">
          <input type="text" ng-model="node.value" class="form-control" name="type" ng-focus="edit=true"
                 ng-blur="edit=false">
          <span class="glyphicon glyphicon-ok form-control-feedback"
                ng-if="(jsonform.type.$dirty && !edit)||(jsonform.type.$pristine&&!edit)"></span>
        </div>
      </div>

      <div ng-switch-when="order" class="col-xs-5 editarea">
        <div class="form-group has-feedback"
             ng-class="{'has-success':(jsonform.order.$dirty && !edit)|| (jsonform.order.$pristine&&!edit)}">
          <input type="text" ng-model="node.value" class="form-control" name="order" ng-focus="edit=true"
                 ng-blur="edit=false">
           <span class="glyphicon glyphicon-ok form-control-feedback"
                 ng-if="(jsonform.order.$dirty && !edit)||(jsonform.order.$pristine&&!edit)"></span>
        </div>
      </div>

      <div ng-switch-when="level" class="col-xs-5 editarea">
        <div class="form-group has-feedback"
             ng-class="{'has-success':(jsonform.level.$dirty && !edit)|| (jsonform.level.$pristine&&!edit)}">

          <input type="text" ng-model="node.value" class="form-control" name="level" ng-focus="edit=true"
                 ng-blur="edit=false">
           <span class="glyphicon glyphicon-ok form-control-feedback"
                 ng-if="(jsonform.level.$dirty && !edit)||(jsonform.level.$pristine&&!edit)"></span>
        </div>
      </div>


      <div ng-switch-when="category" class="col-xs-5 editarea">
        <!--dropdown -->
        <select name="category" class="form-control"
                ng-model="node.value"
                ng-options="category  for category in categories">
          <option value="">-- Please Select --</option>
        </select>
      </div>

      <div ng-switch-when="section" class="col-xs-5 editarea">
        <div class="form-group has-feedback"
             ng-class="{'has-success':(jsonform.section.$dirty && !edit)|| (jsonform.section.$pristine&&!edit)}">
          <input type="text" ng-model="node.value" class="form-control" name="section" ng-focus="edit=true"
                 ng-blur="edit=false">
           <span class="glyphicon glyphicon-ok form-control-feedback"
                 ng-if="(jsonform.section.$dirty && !edit)||(jsonform.section.$pristine&&!edit)"></span>
        </div>
      </div>

      <div ng-switch-when="page" class="col-xs-5 editarea">
        <div class="form-group has-feedback"
             ng-class="{'has-success':(jsonform.page.$dirty && !edit)|| (jsonform.page.$pristine&&!edit)}">
          <input type="text" ng-model="node.value" class="form-control" name="page" ng-focus="edit=true"
                 ng-blur="edit=false">
          <span class="glyphicon glyphicon-ok form-control-feedback"
                ng-if="(jsonform.page.$dirty && !edit)||(jsonform.page.$pristine&&!edit)"></span>
        </div>
      </div>

      <div ng-switch-when="tableauView" class="col-xs-5 editarea">
        <label>Yes&nbsp;&nbsp;<input type="radio" ng-model="node.value"
                                     value="1"></label>&nbsp;&nbsp;&nbsp;&nbsp;<label>No&nbsp;&nbsp; <input type="radio"
                                                                                                            ng-model="node.value"
                                                                                                            value="0"></label>
      </div>

      <div ng-switch-when="Link" class="col-xs-5 editarea">
        <div class="form-group has-feedback"
             ng-class="{'has-success':(jsonform.link.$dirty && !edit)|| (jsonform.link.$pristine&&!edit)}">
          <textarea ng-model="node.value" class="form-control" name="link" ng-focus="edit=true"
                    ng-blur="edit=false" rows="4"></textarea>
            <span class="glyphicon glyphicon-ok form-control-feedback"
                  ng-if="(jsonform.link.$dirty && !edit)||(jsonform.link.$pristine&&!edit)"></span>
        </div>
      </div>

      <div ng-switch-when="tag" class="col-xs-5 editarea">
        <div class="form-group has-feedback"
             ng-class="{'has-success':(jsonform.tag.$dirty && !edit)|| (jsonform.tag.$pristine&&!edit)}">
          <input type="text" ng-model="node.value" class="form-control" name="tag" ng-focus="edit=true"
                 ng-blur="edit=false">
           <span class="glyphicon glyphicon-ok form-control-feedback"
                 ng-if="(jsonform.tag.$dirty && !edit)||(jsonform.tag.$pristine&&!edit)"></span>
        </div>
      </div>

      <div ng-switch-when="id" class="col-xs-5 editarea">
        <div class="form-group has-feedback"
             ng-class="{'has-success':(jsonform.id.$dirty && !edit)|| (jsonform.id.$pristine&&!edit)}">
          <input type="text" ng-model="node.value" class="form-control" ng-focus="edit=true"
                 ng-blur="edit=false" name="id">
          <span class="glyphicon glyphicon-ok form-control-feedback"
                ng-if="(jsonform.id.$dirty && !edit)||(jsonform.id.$pristine&&!edit)"></span>
        </div>
      </div>

      <div ng-switch-when="html" class="col-xs-5 editarea">
        <div class="form-group has-feedback"
             ng-class="{'has-success':(jsonform.html.$dirty && !edit)|| (jsonform.html.$pristine&&!edit)}">
          <textarea class="form-control" rows="10" ng-model="node.value" ng-focus="edit=true"
                    ng-blur="edit=false" name="html"></textarea>
          <span class="glyphicon glyphicon-ok form-control-feedback"
                ng-if="(jsonform.html.$dirty && !edit)||(jsonform.html.$pristine&&!edit)"></span>
        </div>
      </div>

      <div ng-switch-default class="col-xs-12 editarea">
        <div class="form-group has-feedback"
             ng-class="{'has-success':(jsonform.other.$dirty && !edit)|| (jsonform.other.$pristine&&!edit)}"
             ng-if="!isObj(node.value)">
          <input type="text" ng-model="node.value" ng-focus="edit=true"
                 ng-blur="edit=false" name="other" class="form-control">
           <span class="glyphicon glyphicon-ok form-control-feedback"
                 ng-if="(jsonform.other.$dirty && !edit)||(jsonform.other.$pristine&&!edit)"></span>
        </div>
      </div>


    </div>
  </form>
</div>
<ol ui-tree-nodes="" ng-model="node.items" ng-if="isOpen||isOpenAll">
  <li ng-repeat="node in node.items" ui-tree-node ng-include="'leaf.html'">
  </li>
</ol>
